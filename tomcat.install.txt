install tomcat on amazon linux 2023

sudo dnf update -y
sudo dnf install java-17-amazon-corretto -y


sudo groupadd tomcat
sudo useradd -g tomcat -d /opt/tomcat -s /bin/nologin tomcat

cd /tmp
wget https://archive.apache.org/dist/tomcat/tomcat-8/v8.5.100/bin/apache-tomcat-8.5.100.tar.gz
sudo mkdir /opt/tomcat
sudo tar -xvf apache-tomcat-8.5.100.tar.gz -C /opt/tomcat --strip-components=1

sudo chown -R tomcat:tomcat /opt/tomcat
sudo chmod -R 755 /opt/tomcat
sudo chmod +x /opt/tomcat/bin/*.sh

sudo vi /etc/systemd/system/tomcat.service

[Unit]
Description=Apache Tomcat Web Application Server
After=network.target

[Service]
Type=forking
User=tomcat
Group=tomcat
Environment="JAVA_HOME=/usr/lib/jvm/java-17-amazon-corretto"
Environment="CATALINA_PID=/opt/tomcat/temp/tomcat.pid"
Environment="CATALINA_HOME=/opt/tomcat"
Environment="CATALINA_BASE=/opt/tomcat"
ExecStart=/opt/tomcat/bin/startup.sh
ExecStop=/opt/tomcat/bin/shutdown.sh
RestartSec=10
Restart=always

[Install]
WantedBy=multi-user.target


sudo systemctl daemon-reload
sudo systemctl enable tomcat
sudo systemctl start tomcat


sudo vi /opt/tomcat/conf/tomcat-users.xml


<role rolename="manager-gui"/>
<role rolename="admin-gui"/>
<user username="admin" password="your_password" roles="manager-gui,admin-gui"/>